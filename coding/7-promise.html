<script>
  // class PromiseAProto {
  //   then(resolve, reject) {
  //     this.resolves = (this.resolves || []).concat(resolve || [])
  //     this.rejects = (this.rejects || []).concat(reject || [])
  //     return this
  //   }
  // }
  // class PromiseA extends PromiseAProto {
  //   constructor(cb) {
  //     super(cb)
  //     cb(() => {
  //       setTimeout(() => {
  //         var resolve = this.resolves.shift()
  //         var ret = resolve && resolve()
  //         if (this.isPromiseA(ret)) {
  //           Object.assign(ret, this)
  //         }
  //       }, 0)
  //     })
  //   }
  //   isPromiseA(cb) {
  //     return cb instanceof this.constructor
  //   }
  // }
  // new PromiseA((resolve, reject) => {
  //   resolve()
  //   console.log('hello')
  // })
  //   .then(() => {
  //     console.log('world')
  //     return new PromiseA(resolve => {
  //       setTimeout(() => {
  //         resolve()
  //       }, 1000)
  //       console.log('hello1')
  //     })
  //   })
  //   .then(() => {
  //     console.log('over1')
  //   })
  const p1 = new Promise((resolve, reject) => {
    resolve(1)
  })

  const p2 = new Promise((resolve, reject) => {
    resolve(2)
  })

  const p3 = new Promise((resolve, reject) => {
    resolve(3)
  })

  Promise.all([p1, p2, p3])
    .then(data => {
      console.log(res) // [1, 2, 3] 结果顺序和promise实例数组顺序是一致的
    })
    .catch(err => {
      console.log(err)
    })
</script>
